<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>taoensso.faraday documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Faraday</span> <span class="project-version">1.11.4</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>taoensso</span></div></div></li><li class="depth-2 current"><a href="taoensso.faraday.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>faraday</span></div></a></li><li class="depth-3"><a href="taoensso.faraday.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="taoensso.faraday.html#var-*attr-multi-vs.3F*"><div class="inner"><span>*attr-multi-vs?*</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-AsMap"><div class="inner"><span>AsMap</span></div></a></li><li class="depth-2"><a href="taoensso.faraday.html#var-as-map"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>as-map</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-batch-get-item"><div class="inner"><span>batch-get-item</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-batch-write-item"><div class="inner"><span>batch-write-item</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-clj-item-.3Edb-item"><div class="inner"><span>clj-item-&gt;db-item</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-create-table"><div class="inner"><span>create-table</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-db-item-.3Eclj-item"><div class="inner"><span>db-item-&gt;clj-item</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-delete-item"><div class="inner"><span>delete-item</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-delete-table"><div class="inner"><span>delete-table</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-describe-stream"><div class="inner"><span>describe-stream</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-describe-table"><div class="inner"><span>describe-table</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-describe-ttl"><div class="inner"><span>describe-ttl</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-ensure-table"><div class="inner"><span>ensure-table</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-ensure-ttl"><div class="inner"><span>ensure-ttl</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-ex"><div class="inner"><span>ex</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-freeze"><div class="inner"><span>freeze</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-get-item"><div class="inner"><span>get-item</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-get-stream-records"><div class="inner"><span>get-stream-records</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-ISerializable"><div class="inner"><span>ISerializable</span></div></a></li><li class="depth-2"><a href="taoensso.faraday.html#var-serialize"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>serialize</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-items-by-attrs"><div class="inner"><span>items-by-attrs</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-list-streams"><div class="inner"><span>list-streams</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-list-tables"><div class="inner"><span>list-tables</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-put-item"><div class="inner"><span>put-item</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-query"><div class="inner"><span>query</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-remove-empty-attr-vals"><div class="inner"><span>remove-empty-attr-vals</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-scan"><div class="inner"><span>scan</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-scan-parallel"><div class="inner"><span>scan-parallel</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-shard-iterator"><div class="inner"><span>shard-iterator</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-transact-get-items"><div class="inner"><span>transact-get-items</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-transact-write-items"><div class="inner"><span>transact-write-items</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-update-item"><div class="inner"><span>update-item</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-update-table"><div class="inner"><span>update-table</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-update-ttl"><div class="inner"><span>update-ttl</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-with-attr-multi-vs"><div class="inner"><span>with-attr-multi-vs</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-with-thaw-opts"><div class="inner"><span>with-thaw-opts</span></div></a></li><li class="depth-1"><a href="taoensso.faraday.html#var-without-attr-multi-vs"><div class="inner"><span>without-attr-multi-vs</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">taoensso.faraday</h1><div class="doc"><pre class="plaintext">Clojure DynamoDB client. Originally adapted from Rotary by James Reeves.
Ref. <a href="https://github.com/weavejester/rotary">https://github.com/weavejester/rotary</a> (Rotary),
     <a href="http://goo.gl/22QGA">http://goo.gl/22QGA</a> (DynamoDBv2 API)

Definitions:
  * Attribute   - [&lt;name&gt; &lt;val&gt;] pair
  * Item        - Collection of attributes
  * Table       - Collection of items
  * Primary key - Partition (hash) key or
                  Partition (hash) AND sort (range) key</pre></div><div class="public anchor" id="var-*attr-multi-vs.3F*"><h3>*attr-multi-vs?*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Treat attribute vals as expansions rather than literals?
nil =&gt; use `attr-multi-vs?-default` (currently `true` though this may be
changed in future to better support DDB's new collection types,
Ref. <a href="https://github.com/ptaoussanis/faraday/issues/63)">https://github.com/ptaoussanis/faraday/issues/63)</a>.</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L1105">view source</a></div></div><div class="public anchor" id="var-AsMap"><h3>AsMap</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-as-map"><h3>as-map</h3><div class="usage"><code>(as-map x)</code></div><div class="doc"><pre class="plaintext"></pre></div></div></div></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L376">view source</a></div></div><div class="public anchor" id="var-batch-get-item"><h3>batch-get-item</h3><div class="usage"><code>(batch-get-item client-opts requests &amp; [{:keys [return-cc? span-reqs attr-multi-vs?], :as opts}])</code></div><div class="doc"><pre class="plaintext">Retrieves a batch of items in a single request.
Limits apply, Ref. <a href="http://goo.gl/Bj9TC">http://goo.gl/Bj9TC</a>.

(batch-get-item client-opts
  {:users   {:prim-kvs {:name "alice"}}
   :posts   {:prim-kvs {:id [1 2 3]}
             :attrs    [:timestamp :subject]
             :consistent? true}
   :friends {:prim-kvs [{:catagory "favorites" :id [1 2 3]}
                        {:catagory "recent"    :id [7 8 9]}]}})

:span-reqs - {:max _ :throttle-ms _} allows a number of requests to
automatically be stitched together (to exceed throughput limits, for example).</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L1172">view source</a></div></div><div class="public anchor" id="var-batch-write-item"><h3>batch-write-item</h3><div class="usage"><code>(batch-write-item client-opts requests &amp; [{:keys [return-cc? span-reqs attr-multi-vs?], :as opts}])</code></div><div class="doc"><pre class="plaintext">Executes a batch of Puts and/or Deletes in a single request.
 Limits apply, Ref. <a href="http://goo.gl/Bj9TC">http://goo.gl/Bj9TC</a>. No transaction guarantees are
 provided, nor conditional puts. Request execution order is undefined.

 (batch-write-item client-opts
   {:users {:put    [{:user-id 1 :username "sally"}
                     {:user-id 2 :username "jane"}]
            :delete [{:user-id [3 4 5]}]}})

:span-reqs - {:max _ :throttle-ms _} allows a number of requests to
automatically be stitched together (to exceed throughput limits, for example).</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L1207">view source</a></div></div><div class="public anchor" id="var-clj-item-.3Edb-item"><h3>clj-item-&gt;db-item</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L366">view source</a></div></div><div class="public anchor" id="var-create-table"><h3>create-table</h3><div class="usage"><code>(create-table client-opts table-name hash-keydef &amp; [{:keys [block?], :as opts}])</code></div><div class="doc"><pre class="plaintext">Creates a table with options:
hash-keydef   - [&lt;name&gt; &lt;#{:s :n :ss :ns :b :bs}&gt;].
:range-keydef - [&lt;name&gt; &lt;#{:s :n :ss :ns :b :bs}&gt;].
:throughput   - {:read &lt;units&gt; :write &lt;units&gt;}.
:billing-mode - :provisioned | :pay-per-request ; defaults to provisioned
:block?       - Block for table to actually be active?
:lsindexes    - [{:name _ :range-keydef _
                  :projection &lt;#{:all :keys-only [&lt;attr&gt; ...]}&gt;}].
:gsindexes    - [{:name _ :hash-keydef _ :range-keydef _
                  :projection &lt;#{:all :keys-only [&lt;attr&gt; ...]}&gt;
                  :throughput _}].
:stream-spec  - {:enabled? &lt;default true if spec is present&gt;
                 :view-type &lt;#{:keys-only :new-image :old-image :new-and-old-images}&gt;}</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L759">view source</a></div></div><div class="public anchor" id="var-db-item-.3Eclj-item"><h3>db-item-&gt;clj-item</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L365">view source</a></div></div><div class="public anchor" id="var-delete-item"><h3>delete-item</h3><div class="usage"><code>(delete-item client-opts table prim-kvs &amp; [{:keys [return expected return-cc?], :as opts}])</code></div><div class="doc"><pre class="plaintext">Deletes an item from a table by its primary key.
See `put-item` for option docs.</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L1090">view source</a></div></div><div class="public anchor" id="var-delete-table"><h3>delete-table</h3><div class="usage"><code>(delete-table client-opts table)</code></div><div class="doc"><pre class="plaintext">Deletes a table, go figure.
</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L922">view source</a></div></div><div class="public anchor" id="var-describe-stream"><h3>describe-stream</h3><div class="usage"><code>(describe-stream client-opts stream-arn &amp; [{:keys [limit start-shard-id], :as opts}])</code></div><div class="doc"><pre class="plaintext">Returns a map describing a stream, or nil if the stream doesn't exist.
</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L1591">view source</a></div></div><div class="public anchor" id="var-describe-table"><h3>describe-table</h3><div class="usage"><code>(describe-table client-opts table)</code></div><div class="doc"><pre class="plaintext">Returns a map describing a table, or nil if the table doesn't exist.
</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L599">view source</a></div></div><div class="public anchor" id="var-describe-ttl"><h3>describe-ttl</h3><div class="usage"><code>(describe-ttl client-opts table-name)</code></div><div class="doc"><pre class="plaintext">Returns a map describing the TTL configuration for a table, or nil if
the table does not exist.</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L1635">view source</a></div></div><div class="public anchor" id="var-ensure-table"><h3>ensure-table</h3><div class="usage"><code>(ensure-table client-opts table-name hash-keydef &amp; [opts])</code></div><div class="doc"><pre class="plaintext">Creates a table iff it doesn't already exist.
</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L783">view source</a></div></div><div class="public anchor" id="var-ensure-ttl"><h3>ensure-ttl</h3><div class="usage"><code>(ensure-ttl client-opts table-name key-name)</code></div><div class="doc"><pre class="plaintext">Activates TTL with the given key-name iff the TTL configuration is
not already set in this way.</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L1663">view source</a></div></div><div class="public anchor" id="var-ex"><h3>ex</h3><div class="usage"></div><div class="doc"><pre class="plaintext">DynamoDB API exceptions. Use #=(ex _) for `try` blocks, etc.
</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L213">view source</a></div></div><div class="public anchor" id="var-freeze"><h3>freeze</h3><div class="usage"><code>(freeze x)</code><code>(freeze x opts)</code></div><div class="doc"><pre class="plaintext">Forces argument of any type to be subject to automatic de/serialization with
Nippy.</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L238">view source</a></div></div><div class="public anchor" id="var-get-item"><h3>get-item</h3><div class="usage"><code>(get-item client-opts table prim-kvs &amp; [opts])</code></div><div class="doc"><pre class="plaintext">Retrieves an item from a table by its primary key with options:
prim-kvs         - {&lt;hash-key&gt; &lt;val&gt;} or {&lt;hash-key&gt; &lt;val&gt; &lt;range-key&gt; &lt;val&gt;}.
:attrs           - Attrs to return, [&lt;attr&gt; ...].
:proj-expr       - Projection expression as a string
:expr-attr-names - Map of strings for ExpressionAttributeNames
:consistent?     - Use strongly (rather than eventually) consistent reads?</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L939">view source</a></div></div><div class="public anchor" id="var-get-stream-records"><h3>get-stream-records</h3><div class="usage"><code>(get-stream-records client-opts shard-iterator &amp; [{:keys [limit], :as opts}])</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L1623">view source</a></div></div><div class="public anchor" id="var-ISerializable"><h3>ISerializable</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Extensible protocol for mapping Clojure vals to AttributeValue objects.
</pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-serialize"><h3>serialize</h3><div class="usage"><code>(serialize this)</code></div><div class="doc"><pre class="plaintext"></pre></div></div></div></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L302">view source</a></div></div><div class="public anchor" id="var-items-by-attrs"><h3>items-by-attrs</h3><div class="usage"><code>(items-by-attrs attr-or-attrs item-or-items)</code></div><div class="doc"><pre class="plaintext">Groups one or more items by one or more attributes, returning a map of form
{&lt;attr-val&gt; &lt;item&gt; ...} or {{&lt;attr&gt; &lt;val&gt; ...} &lt;item&gt;}.

Good for collecting batch or query/scan items results into useable maps,
indexed by their 'primary key' (which, remember, may consist of 1 OR 2 attrs).</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L1674">view source</a></div></div><div class="public anchor" id="var-list-streams"><h3>list-streams</h3><div class="usage"><code>(list-streams client-opts &amp; [{:keys [start-arn table-name limit], :as opts}])</code></div><div class="doc"><pre class="plaintext">Returns a lazy sequence of stream descriptions. Each item is a map of:
{:stream-arn - Stream identifier string
 :table-name - The table name for the stream}

 Options:
  :start-arn  - The stream identifier to start listing from (exclusive)
  :table-name - List only the streams for &lt;table-name&gt;
  :limit      - Retrieve streams in batches of &lt;limit&gt; at a time</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L1563">view source</a></div></div><div class="public anchor" id="var-list-tables"><h3>list-tables</h3><div class="usage"><code>(list-tables client-opts)</code></div><div class="doc"><pre class="plaintext">Returns a lazy sequence of table names.
</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L579">view source</a></div></div><div class="public anchor" id="var-put-item"><h3>put-item</h3><div class="usage"><code>(put-item client-opts table item &amp; [{:keys [return expected return-cc? cond-expr], :as opts}])</code></div><div class="doc"><pre class="plaintext">Adds an item (Clojure map) to a table with options:
:return          - e/o #{:none :all-old}
:cond-expr       - "attribute_exists(attr_name) AND|OR ..."
:expr-attr-names - {"#attr_name" "name"}
:expr-attr-vals  - {":attr_value" "value"}
:expected        - DEPRECATED in favor of `:cond-expr`,
  {&lt;attr&gt; &lt;#{:exists :not-exists [&lt;comparison-operator&gt; &lt;value&gt;] &lt;value&gt;}&gt; ...}
  With comparison-operator e/o #{:eq :le :lt :ge :gt :begins-with :between}.</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L992">view source</a></div></div><div class="public anchor" id="var-query"><h3>query</h3><div class="usage"><code>(query client-opts table prim-key-conds &amp; [{:keys [last-prim-kvs query-filter span-reqs return index order limit consistent? return-cc?], :as opts}])</code></div><div class="doc"><pre class="plaintext">Retrieves items from a table (indexed) with options:
  prim-key-conds   - {&lt;key-attr&gt; [&lt;comparison-operator&gt; &lt;val-or-vals&gt;] ...}.
  :last-prim-kvs   - Primary key-val from which to eval, useful for paging.
  :query-filter    - {&lt;key-attr&gt; [&lt;comparison-operator&gt; &lt;val-or-vals&gt;] ...}.
  :proj-expr       - Projection expression string
  :filter-expr     - Filter expression string
  :expr-attr-names - Expression attribute names, as a map of {"#attr_name" "name"}
  :expr-attr-vals  - Expression attribute values, as a map {":attr_value" "value"}
  :span-reqs       - {:max _ :throttle-ms _} controls automatic multi-request
                     stitching.
  :return          - e/o #{:all-attributes :all-projected-attributes :count
                           [&lt;attr&gt; ...]}.
  :index           - Name of a local or global secondary index to query.
  :order           - Index scaning order e/o #{:asc :desc}.
  :limit           - Max num &gt;=1 of items to eval (≠ num of matching items).
                     Useful to prevent harmful sudden bursts of read activity.
  :consistent?     - Use strongly (rather than eventually) consistent reads?

(create-table client-opts :my-table [:name :s]
  {:range-keydef [:age :n] :block? true})

(do (put-item client-opts :my-table {:name "Steve" :age 24})
    (put-item client-opts :my-table {:name "Susan" :age 27}))
(query client-opts :my-table {:name [:eq "Steve"]
                              :age  [:between [10 30]]})
=&gt; [{:age 24, :name "Steve"}]

comparison-operators e/o #{:eq :le :lt :ge :gt :begins-with :between}.

For unindexed item retrievel see `scan`.

Ref. <a href="http://goo.gl/XfGKW">http://goo.gl/XfGKW</a> for query+scan best practices.</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L1407">view source</a></div></div><div class="public anchor" id="var-remove-empty-attr-vals"><h3>remove-empty-attr-vals</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Alpha, subject to change.
Util to help remove (or coerce to nil) empty val types prohibited by DDB,
Ref. <a href="http://goo.gl/Xg85pO">http://goo.gl/Xg85pO</a>. Note that empty string and binary attributes are
now permitted: <a href="https://amzn.to/3szZ0E5">https://amzn.to/3szZ0E5</a> See also `freeze` as an alternative.</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L1691">view source</a></div></div><div class="public anchor" id="var-scan"><h3>scan</h3><div class="usage"><code>(scan client-opts table &amp; [{:keys [attr-conds last-prim-kvs span-reqs return limit total-segments filter-expr segment return-cc?], :as opts}])</code></div><div class="doc"><pre class="plaintext">Retrieves items from a table (unindexed) with options:
  :attr-conds      - {&lt;attr&gt; [&lt;comparison-operator&gt; &lt;val-or-vals&gt;] ...}.
  :expr-attr-names - Expression attribute names, as a map of {"#attr_name" "name"}
  :expr-attr-vals  - Expression attribute names, as a map of {":attr" "value"}
  :filter-expr     - Filter expression string
  :index           - Index name to use.
  :proj-expr       - Projection expression as a string
  :limit           - Max num &gt;=1 of items to eval (≠ num of matching items).
                     Useful to prevent harmful sudden bursts of read activity.
  :last-prim-kvs   - Primary key-val from which to eval, useful for paging.
  :span-reqs       - {:max _ :throttle-ms _} controls automatic multi-request
                     stitching.
  :return          - e/o #{:all-attributes :all-projected-attributes :count
                           [&lt;attr&gt; ...]}.
  :total-segments  - Total number of parallel scan segments.
  :segment         - Calling worker's segment number (&gt;=0, &lt;=total-segments).
  :consistent?     - Use strongly (rather than eventually) consistent reads?

comparison-operators e/o #{:eq :le :lt :ge :gt :begins-with :between :ne
                           :not-null :null :contains :not-contains :in}.

(create-table client-opts :my-table [:name :s]
  {:range-keydef [:age :n] :block? true})

(do (put-item client-opts :my-table {:name "Steve" :age 24})
    (put-item client-opts :my-table {:name "Susan" :age 27}))
(scan client-opts :my-table {:attr-conds {:age [:in [24 27]]}})
=&gt; [{:age 24, :name "Steve"} {:age 27, :name "Susan"}]

For automatic parallelization &amp; segment control see `scan-parallel`.
For indexed item retrievel see `query`.

Ref. <a href="http://goo.gl/XfGKW">http://goo.gl/XfGKW</a> for query+scan best practices.</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L1480">view source</a></div></div><div class="public anchor" id="var-scan-parallel"><h3>scan-parallel</h3><div class="usage"><code>(scan-parallel client-opts table total-segments &amp; [opts])</code></div><div class="doc"><pre class="plaintext">Like `scan` but starts a number of worker threads and automatically handles
parallel scan options (:total-segments and :segment). Returns a vector of
`scan` results.

Ref. <a href="http://goo.gl/KLwnn">http://goo.gl/KLwnn</a> (official parallel scan documentation).</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L1534">view source</a></div></div><div class="public anchor" id="var-shard-iterator"><h3>shard-iterator</h3><div class="usage"><code>(shard-iterator client-opts stream-arn shard-id iterator-type &amp; [{:keys [seq-num], :as opts}])</code></div><div class="doc"><pre class="plaintext">Returns the iterator string that can be used in the get-stream-records call
or nil when the stream or shard doesn't exist.</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L1606">view source</a></div></div><div class="public anchor" id="var-transact-get-items"><h3>transact-get-items</h3><div class="usage"><code>(transact-get-items client-opts raw-req)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L1349">view source</a></div></div><div class="public anchor" id="var-transact-write-items"><h3>transact-write-items</h3><div class="usage"><code>(transact-write-items client-opts raw-req)</code></div><div class="doc"><pre class="plaintext">Executes a transaction comprising puts, updates, deletes and cond-checks; either all succeed or all fail.
 Execution order is the order in the items vector.

 For example:
 (far/transact-write-items client-opts
                           {:items [[:cond-check {:table-name ttable
                                                  :prim-kvs {:id 300}
                                                  :cond-expr "attribute_exists(#id)"
                                                  :expr-attr-names {"#id" "id"}}]
                                    [:put {:table-name ttable
                                           :item i2
                                           :cond-expr "attribute_not_exists(#id)"
                                           :expr-attr-names {"#id" "id"}}]
                                    [:delete {:table-name ttable
                                              :prim-kvs {:id 303}
                                              :cond-expr "attribute_exists(#id)"
                                              :expr-attr-names {"#id" "id"}}]
                                    [:update {:table-name ttable
                                              :prim-kvs {:id 300}
                                              :update-expr "SET #name = :name"
                                              :cond-expr "attribute_exists(#id) AND #name = :oldname"
                                              :expr-attr-names {"#id" "id", "#name" "name"}
                                              :expr-attr-vals {":oldname" "foo", ":name" "foobar"}}]]})
returns {:cc-units {&lt;table&gt; &lt;consumed-capacity&gt;}}}</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L1304">view source</a></div></div><div class="public anchor" id="var-update-item"><h3>update-item</h3><div class="usage"><code>(update-item client-opts table prim-kvs &amp; [{:keys [update-map return expected return-cc? cond-expr update-expr], :as opts}])</code></div><div class="doc"><pre class="plaintext">Updates an item in a table by its primary key with options:
prim-kvs         - {&lt;hash-key&gt; &lt;val&gt;} or {&lt;hash-key&gt; &lt;val&gt; &lt;range-key&gt; &lt;val&gt;}
:update-map      - DEPRECATED in favor of `:update-expr`,
                   {&lt;attr&gt; [&lt;#{:put :add :delete}&gt; &lt;optional value&gt;]}
:cond-expr       - "attribute_exists(attr_name) AND|OR ..."
:update-expr     - "SET #attr_name = :attr_value"
:expr-attr-names - {"#attr_name" "name"}
:expr-attr-vals  - {":attr_value" "value"}
:return          - e/o #{:none :all-old :updated-old :all-new :updated-new}
:expected        - DEPRECATED in favor of `:cond-expr`,
  {&lt;attr&gt; &lt;#{:exists :not-exists [&lt;comparison-operator&gt; &lt;value&gt;] &lt;value&gt;}&gt; ...}
  With comparison-operator e/o #{:eq :le :lt :ge :gt :begins-with :between}.</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L1046">view source</a></div></div><div class="public anchor" id="var-update-table"><h3>update-table</h3><div class="usage"><code>(update-table client-opts table update-opts &amp; [{:keys [span-reqs]}])</code></div><div class="doc"><pre class="plaintext">Returns a future which updates table and returns the post-update table
description.

Update opts:
  :throughput   - {:read &lt;units&gt; :write &lt;units&gt;}
  :billing-mode - :provisioned | :pay-per-request   ; defaults to provisioned
  :gsindexes    - {:operation                       ; e/o #{:create :update :delete}
                  :name                             ; Required
                  :throughput                       ; Only for :update / :create
                  :hash-keydef                      ; Only for :create
                  :range-keydef                     ;
                  :projection                       ; e/o #{:all :keys-only [&lt;attr&gt; ...]}}
  :stream-spec  - {:enabled?                        ;
                  :view-type                        ; e/o #{:keys-only :new-image :old-image :old-and-new-images}}

Only one global secondary index operation can take place at a time.
In order to change a stream view-type, you need to disable and re-enable the stream.</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L877">view source</a></div></div><div class="public anchor" id="var-update-ttl"><h3>update-ttl</h3><div class="usage"><code>(update-ttl client-opts table-name enabled? key-name)</code></div><div class="doc"><pre class="plaintext">Updates the TTL configuration for a table.
</pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L1654">view source</a></div></div><div class="public anchor" id="var-with-attr-multi-vs"><h3>with-attr-multi-vs</h3><h4 class="type">macro</h4><div class="usage"><code>(with-attr-multi-vs &amp; body)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L1111">view source</a></div></div><div class="public anchor" id="var-with-thaw-opts"><h3>with-thaw-opts</h3><h4 class="type">macro</h4><div class="usage"><code>(with-thaw-opts opts &amp; body)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L237">view source</a></div></div><div class="public anchor" id="var-without-attr-multi-vs"><h3>without-attr-multi-vs</h3><h4 class="type">macro</h4><div class="usage"><code>(without-attr-multi-vs &amp; body)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/ptaoussanis/faraday/blob/master/src/taoensso/faraday.clj#L1112">view source</a></div></div></div></body></html>